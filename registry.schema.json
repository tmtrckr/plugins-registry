{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Time Tracker Plugin Registry Schema",
  "description": "Schema for the centralized plugin registry",
  "type": "object",
  "required": ["version", "last_updated", "plugins"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Registry format version",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "last_updated": {
      "type": "string",
      "description": "ISO 8601 timestamp of last registry update",
      "format": "date-time"
    },
    "plugins": {
      "type": "array",
      "description": "List of available plugins",
      "items": {
        "type": "object",
        "required": ["id", "name", "author", "repository", "latest_version", "description"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique plugin identifier (lowercase, alphanumeric with hyphens)",
            "pattern": "^[a-z0-9-]+$",
            "minLength": 1,
            "maxLength": 50
          },
          "name": {
            "type": "string",
            "description": "Display name of the plugin",
            "minLength": 1,
            "maxLength": 100
          },
          "author": {
            "type": "string",
            "description": "Plugin author name",
            "minLength": 1,
            "maxLength": 100
          },
          "repository": {
            "type": "string",
            "description": "GitHub repository URL",
            "pattern": "^https://github\\.com/[a-zA-Z0-9_.-]+/[a-zA-Z0-9_.-]+$"
          },
          "latest_version": {
            "type": "string",
            "description": "Latest available version (semver)",
            "pattern": "^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.]+)?(\\+[a-zA-Z0-9.]+)?$"
          },
          "description": {
            "type": "string",
            "description": "Plugin description",
            "minLength": 10,
            "maxLength": 500
          },
          "category": {
            "type": "string",
            "description": "Plugin category",
            "enum": [
              "integration",
              "productivity",
              "reporting",
              "automation",
              "export",
              "import",
              "ui",
              "other"
            ],
            "default": "other"
          },
          "verified": {
            "type": "boolean",
            "description": "Whether the plugin is verified by registry maintainers",
            "default": false
          },
          "downloads": {
            "type": "integer",
            "description": "Total download count",
            "minimum": 0,
            "default": 0
          },
          "tags": {
            "type": "array",
            "description": "Searchable tags for the plugin",
            "items": {
              "type": "string",
              "minLength": 1,
              "maxLength": 30
            },
            "uniqueItems": true,
            "maxItems": 10
          },
          "icon": {
            "type": "string",
            "description": "URL to plugin icon image",
            "format": "uri"
          },
          "homepage": {
            "type": "string",
            "description": "Plugin homepage URL",
            "format": "uri"
          },
          "license": {
            "type": "string",
            "description": "Plugin license (SPDX identifier)",
            "default": "MIT"
          },
          "min_core_version": {
            "type": "string",
            "description": "Minimum required Time Tracker core version",
            "pattern": "^\\d+\\.\\d+\\.\\d+$"
          },
          "max_core_version": {
            "type": "string",
            "description": "Maximum compatible Time Tracker core version",
            "pattern": "^\\d+\\.\\d+\\.\\d+$"
          },
          "api_version": {
            "type": "string",
            "description": "Plugin API version",
            "pattern": "^\\d+\\.\\d+$"
          }
        }
      }
    }
  }
}
